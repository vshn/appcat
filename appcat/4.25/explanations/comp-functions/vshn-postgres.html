<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns/website#">
  <head itemscope itemtype="http://schema.org/WebSite">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>VSHN Postgres Function-io :: Application Catalog</title>
    <meta property="og:title" itemprop="name" content="VSHN Postgres Function-io">
    <meta name="twitter:title" content="VSHN Postgres Function-io">
    <link rel="canonical" href="https://vshn.github.io/appcat/appcat/explanations/comp-functions/vshn-postgres.html">
    <meta property="og:url" content="https://vshn.github.io/appcat/appcat/explanations/comp-functions/vshn-postgres.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Application Catalog" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="vshn_ch">
    <meta property="og:locale" content="en_US" />
    <script>var uiRootPath = '../../../../_'</script>
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/7105834.js"></script>
<meta name="apple-mobile-web-app-capable" content="yes" />
<link rel="apple-touch-icon" sizes="152x152" href="/_/img/favicon-152x152.png">
<link rel="apple-touch-icon" sizes="167x167" href="/_/img/favicon-167x167.png">
<link rel="apple-touch-icon" sizes="180x180" href="/_/img/favicon-180x180.png">

<link rel="icon" type="image/png" href="/_/img/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="/_/img/favicon-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/_/img/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/_/img/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/_/img/favicon-32x32.png" sizes="32x32">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <div class="vshn_logo"></div>
        <a href="https://vshn.github.io/appcat">Application Catalog
           â€“
          v4.25</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">VSHN</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://www.vshn.ch/">Main website</a>
            <a class="navbar-item" target="_blank" href="https://handbook.vshn.ch/">Handbook</a>
            <a class="navbar-item" target="_blank" href="https://kb.vshn.ch/">Knowledge Base</a>
            <a class="navbar-item" target="_blank" href="https://products.docs.vshn.ch/">Products</a>
            <a class="navbar-item" target="_blank" href="https://legal.docs.vshn.ch/">Legal</a>
            <a class="navbar-item" target="_blank" href="https://control.docs.vshn.ch/">Portal Help</a>
            <a class="navbar-item" target="_blank" href="https://docs.appuio.cloud/">APPUiO Cloud Docs</a>
            <a class="navbar-item" target="_blank" href="https://syn.tools/">Project Syn</a>
            <a class="navbar-item" target="_blank" href="https://k8up.io/">K8up</a>
          </div>
        </div>
        <div class="navbar-item">
          <div class="search-field">
            <input id="search-input" class="search-input" type="search" placeholder="Search">
            <button type="submit" class="search-button">
              <i class="fa fa-search"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="appcat" data-version="4.25">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Application Catalog</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="https://github.com/vshn/appcat/releases" target="_blank" rel="noopener">Changelog</a> ðŸ”—</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How To</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../examples/vscode.html">VSCode Launch Configs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technical reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../references/apiserver/env-variables.html">Env variables</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../apiserver/boostrap.html">Boostrap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="runtime.html">Runtime Library</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="vshn-postgres.html">VSHN Postgres Functions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../slareports.html">SLA Reports</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../dev-notes.html">Dev Notes for Composition Functions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debug.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="redis-pvc-resize.html">Redis PVC resize</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../webhooks.html">Webhooks</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Application Catalog</span>
    <span class="version">4.25</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../../index.html">Application Catalog</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../4.68/index.html">4.68</a>
        </li>
        <li class="version">
          <a href="../../../4.67/index.html">4.67</a>
        </li>
        <li class="version">
          <a href="../../../4.66/index.html">4.66</a>
        </li>
        <li class="version">
          <a href="../../../4.65/index.html">4.65</a>
        </li>
        <li class="version">
          <a href="../../../4.64/index.html">4.64</a>
        </li>
        <li class="version">
          <a href="../../../4.63/index.html">4.63</a>
        </li>
        <li class="version">
          <a href="../../../4.62/index.html">4.62</a>
        </li>
        <li class="version">
          <a href="../../../4.61/index.html">4.61</a>
        </li>
        <li class="version">
          <a href="../../../4.60/index.html">4.60</a>
        </li>
        <li class="version">
          <a href="../../../4.59/index.html">4.59</a>
        </li>
        <li class="version">
          <a href="../../../4.58/index.html">4.58</a>
        </li>
        <li class="version">
          <a href="../../../4.57/index.html">4.57</a>
        </li>
        <li class="version">
          <a href="../../../4.56/index.html">4.56</a>
        </li>
        <li class="version">
          <a href="../../../4.55/index.html">4.55</a>
        </li>
        <li class="version">
          <a href="../../../4.54/index.html">4.54</a>
        </li>
        <li class="version">
          <a href="../../../4.53/index.html">4.53</a>
        </li>
        <li class="version">
          <a href="../../../4.52/index.html">4.52</a>
        </li>
        <li class="version">
          <a href="../../../4.51/index.html">4.51</a>
        </li>
        <li class="version">
          <a href="../../../4.50/index.html">4.50</a>
        </li>
        <li class="version">
          <a href="../../../4.49/index.html">4.49</a>
        </li>
        <li class="version">
          <a href="../../../4.48/index.html">4.48</a>
        </li>
        <li class="version">
          <a href="../../../4.47/index.html">4.47</a>
        </li>
        <li class="version">
          <a href="../../../4.46/index.html">4.46</a>
        </li>
        <li class="version">
          <a href="../../../4.45/index.html">4.45</a>
        </li>
        <li class="version">
          <a href="../../../4.44/index.html">4.44</a>
        </li>
        <li class="version">
          <a href="../../../4.43/index.html">4.43</a>
        </li>
        <li class="version">
          <a href="../../../4.42/index.html">4.42</a>
        </li>
        <li class="version">
          <a href="../../../4.41/index.html">4.41</a>
        </li>
        <li class="version">
          <a href="../../../4.40/index.html">4.40</a>
        </li>
        <li class="version">
          <a href="../../../4.39/index.html">4.39</a>
        </li>
        <li class="version">
          <a href="../../../4.38/index.html">4.38</a>
        </li>
        <li class="version">
          <a href="../../../4.37/index.html">4.37</a>
        </li>
        <li class="version">
          <a href="../../../4.36/index.html">4.36</a>
        </li>
        <li class="version">
          <a href="../../../4.35/index.html">4.35</a>
        </li>
        <li class="version">
          <a href="../../../4.34/index.html">4.34</a>
        </li>
        <li class="version">
          <a href="../../../4.33/index.html">4.33</a>
        </li>
        <li class="version">
          <a href="../../../4.32/index.html">4.32</a>
        </li>
        <li class="version">
          <a href="../../../4.31/index.html">4.31</a>
        </li>
        <li class="version">
          <a href="../../../4.30/index.html">4.30</a>
        </li>
        <li class="version">
          <a href="../../../4.29/index.html">4.29</a>
        </li>
        <li class="version">
          <a href="../../../4.28/index.html">4.28</a>
        </li>
        <li class="version">
          <a href="../../../4.27/index.html">4.27</a>
        </li>
        <li class="version">
          <a href="../../../4.26/index.html">4.26</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">4.25</a>
        </li>
        <li class="version">
          <a href="../../../4.24/index.html">4.24</a>
        </li>
        <li class="version">
          <a href="../../../4.23/index.html">4.23</a>
        </li>
        <li class="version">
          <a href="../../../4.22/index.html">4.22</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../go-bootstrap/index.html">Go Bootstrap</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../go-bootstrap/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.21/index.html">4.21</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.20/index.html">4.20</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.19/index.html">4.19</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.18/index.html">4.18</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.17/index.html">4.17</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.16/index.html">4.16</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.15/index.html">4.15</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.14/index.html">4.14</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.13/index.html">4.13</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.12/index.html">4.12</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.11/index.html">4.11</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.10/index.html">4.10</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.9/index.html">4.9</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.8/index.html">4.8</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.7/index.html">4.7</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.6/index.html">4.6</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.5/index.html">4.5</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.4/index.html">4.4</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.3/index.html">4.3</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.2/index.html">4.2</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.1/index.html">4.1</a>
        </li>
        <li class="version">
          <a href="../../../../go-bootstrap/4.0/index.html">4.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Application Catalog</a></li>
    <li>Explanation</li>
    <li><a href="vshn-postgres.html">VSHN Postgres Functions</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.25</button>
  <div class="version-menu">
    <a class="version" href="../../../explanations/comp-functions/vshn-postgres.html">master</a>
    <a class="version" href="../../../4.68/explanations/comp-functions/vshn-postgres.html">4.68</a>
    <a class="version" href="../../../4.67/explanations/comp-functions/vshn-postgres.html">4.67</a>
    <a class="version" href="../../../4.66/explanations/comp-functions/vshn-postgres.html">4.66</a>
    <a class="version" href="../../../4.65/explanations/comp-functions/vshn-postgres.html">4.65</a>
    <a class="version" href="../../../4.64/explanations/comp-functions/vshn-postgres.html">4.64</a>
    <a class="version" href="../../../4.63/explanations/comp-functions/vshn-postgres.html">4.63</a>
    <a class="version" href="../../../4.62/explanations/comp-functions/vshn-postgres.html">4.62</a>
    <a class="version" href="../../../4.61/explanations/comp-functions/vshn-postgres.html">4.61</a>
    <a class="version" href="../../../4.60/explanations/comp-functions/vshn-postgres.html">4.60</a>
    <a class="version" href="../../../4.59/explanations/comp-functions/vshn-postgres.html">4.59</a>
    <a class="version" href="../../../4.58/explanations/comp-functions/vshn-postgres.html">4.58</a>
    <a class="version" href="../../../4.57/explanations/comp-functions/vshn-postgres.html">4.57</a>
    <a class="version" href="../../../4.56/explanations/comp-functions/vshn-postgres.html">4.56</a>
    <a class="version" href="../../../4.55/explanations/comp-functions/vshn-postgres.html">4.55</a>
    <a class="version" href="../../../4.54/explanations/comp-functions/vshn-postgres.html">4.54</a>
    <a class="version" href="../../../4.53/explanations/comp-functions/vshn-postgres.html">4.53</a>
    <a class="version" href="../../../4.52/explanations/comp-functions/vshn-postgres.html">4.52</a>
    <a class="version" href="../../../4.51/explanations/comp-functions/vshn-postgres.html">4.51</a>
    <a class="version" href="../../../4.50/explanations/comp-functions/vshn-postgres.html">4.50</a>
    <a class="version" href="../../../4.49/explanations/comp-functions/vshn-postgres.html">4.49</a>
    <a class="version" href="../../../4.48/explanations/comp-functions/vshn-postgres.html">4.48</a>
    <a class="version" href="../../../4.47/explanations/comp-functions/vshn-postgres.html">4.47</a>
    <a class="version" href="../../../4.46/explanations/comp-functions/vshn-postgres.html">4.46</a>
    <a class="version" href="../../../4.45/explanations/comp-functions/vshn-postgres.html">4.45</a>
    <a class="version" href="../../../4.44/explanations/comp-functions/vshn-postgres.html">4.44</a>
    <a class="version" href="../../../4.43/explanations/comp-functions/vshn-postgres.html">4.43</a>
    <a class="version" href="../../../4.42/explanations/comp-functions/vshn-postgres.html">4.42</a>
    <a class="version" href="../../../4.41/explanations/comp-functions/vshn-postgres.html">4.41</a>
    <a class="version" href="../../../4.40/explanations/comp-functions/vshn-postgres.html">4.40</a>
    <a class="version" href="../../../4.39/explanations/comp-functions/vshn-postgres.html">4.39</a>
    <a class="version" href="../../../4.38/explanations/comp-functions/vshn-postgres.html">4.38</a>
    <a class="version" href="../../../4.37/explanations/comp-functions/vshn-postgres.html">4.37</a>
    <a class="version" href="../../../4.36/explanations/comp-functions/vshn-postgres.html">4.36</a>
    <a class="version" href="../../../4.35/explanations/comp-functions/vshn-postgres.html">4.35</a>
    <a class="version" href="../../../4.34/explanations/comp-functions/vshn-postgres.html">4.34</a>
    <a class="version" href="../../../4.33/explanations/comp-functions/vshn-postgres.html">4.33</a>
    <a class="version" href="../../../4.32/explanations/comp-functions/vshn-postgres.html">4.32</a>
    <a class="version" href="../../../4.31/explanations/comp-functions/vshn-postgres.html">4.31</a>
    <a class="version" href="../../../4.30/explanations/comp-functions/vshn-postgres.html">4.30</a>
    <a class="version" href="../../../4.29/explanations/comp-functions/vshn-postgres.html">4.29</a>
    <a class="version" href="../../../4.28/explanations/comp-functions/vshn-postgres.html">4.28</a>
    <a class="version" href="../../../4.27/explanations/comp-functions/vshn-postgres.html">4.27</a>
    <a class="version" href="../../../4.26/explanations/comp-functions/vshn-postgres.html">4.26</a>
    <a class="version is-current" href="vshn-postgres.html">4.25</a>
    <a class="version" href="../../../4.24/explanations/comp-functions/vshn-postgres.html">4.24</a>
    <a class="version" href="../../../4.23/explanations/comp-functions/vshn-postgres.html">4.23</a>
    <a class="version" href="../../../4.22/explanations/comp-functions/vshn-postgres.html">4.22</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/vshn/appcat/edit/docs/v4.25/docs/modules/ROOT/pages/explanations/comp-functions/vshn-postgres.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">VSHN Postgres Function-io</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The set of transformation go functions applied to a VSHN Postgres composition.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transformation_url_connection_details"><a class="anchor" href="#_transformation_url_connection_details"></a>Transformation URL-CONNECTION-DETAILS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The function URL-CONNECTION-DETAILS adds a new <code>POSTGRES_URL</code> entry in  the connection detail of the composite. The value is defined as <code>postgres://user:password@host:port/db</code>. Once it is executed the client has access to the URL of its database via connection secret.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maintenance"><a class="anchor" href="#_maintenance"></a>Maintenance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The maintenance for PostgreSQL leverages StackGres' built in operations CRDs.
They can do various operations against a database.
As soon as one is created StackGres will initiate the operation.</p>
</div>
<div class="sect2">
<h3 id="_appcat_implementation"><a class="anchor" href="#_appcat_implementation"></a>AppCat Implementation</h3>
<div class="paragraph">
<p>In AppCat there&#8217;s a cronjob deployed for each instance that is provisioned.
This cronjob will create a <code>SGDbOps</code> when run.
What kind of operation it creates depends on following factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the instance is on a current minor version, then do a security update</p>
</li>
<li>
<p>If the instance is on an older minor version, then do a minor upgrade</p>
</li>
<li>
<p>If the StackGres API is not available do a security update</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After instance update/upgrade completion, a <code>pg_repack</code> operation will be performed on all databases.</p>
</div>
<div class="paragraph">
<p>The StackGres operator API is used to query what versions are currently supported.
If a new StackGres release supports newer minor versions of PostgreSQL, then all instances of that major version will do an update during their next maintenance window.</p>
</div>
<div class="paragraph">
<p>The actual logic for this is in the maintenance CMD.
It serves as the entrypoint for the container that the cronjob starts.
This can be enhanced with maintenance routines for future services.
Adding new <code>SGDbOps</code> objects to the job should also be trivial, if the need arises.</p>
</div>
<div class="paragraph">
<p>To query the StackGres API the composition function copies StackGres' credential secret into the instance namespace.
For the maintenance to properly work the <code>clearPassword</code> field in the credential secret has to exist, as otherwise the job would not be able to read it.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright Â© VSHN 2021 â€“ All Rights Reserved. <a href="https://vshn.ch/en/privacy-policy/">Privacy Policy</a>, <a href="https://vshn.ch/en/imprint/">Imprint</a>, and <a href="https://vshn.ch/en/contact/">Contact</a>.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
  </body>
</html>
