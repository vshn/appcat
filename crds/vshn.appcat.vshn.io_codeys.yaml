---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: codeys.vshn.appcat.vshn.io
spec:
  group: vshn.appcat.vshn.io
  names:
    kind: Codey
    listKind: CodeyList
    plural: codeys
    singular: codey
  scope: Namespaced
  versions:
    - name: v1
      schema:
        openAPIV3Schema:
          description: Codey is the API for creating Codey instances.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: Spec defines the desired state of a Codey.
              properties:
                parameters:
                  description: Parameters are the configurable fields of a Codey.
                  properties:
                    service:
                      description: Service contains Codey DBaaS specific properties
                      properties:
                        adminEmail:
                          description: AdminEmail for email notifications.
                          type: string
                        fqdn:
                          description: |-
                            FQDN contains the FQDNs array, which will be used for the ingress.
                            If it's not set, no ingress will be deployed.
                            This also enables strict hostname checking for this FQDN.
                          items:
                            type: string
                          minItems: 1
                          type: array
                        majorVersion:
                          description: |-
                            Version contains supported version of Codey.
                            Multiple versions are supported.
                          type: string
                      required:
                        - adminEmail
                        - fqdn
                      type: object
                    size:
                      default: mini
                      description: Size contains settings to control the sizing of a service.
                      enum:
                        - mini
                        - small
                      type: string
                  type: object
                  default: {}
                writeConnectionSecretToRef:
                  description: WriteConnectionSecretToRef references a secret to which the connection details will be written.
                  properties:
                    name:
                      description: |-
                        Name of the referent.
                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      type: string
                    namespace:
                      type: string
                  type: object
                  x-kubernetes-map-type: atomic
              type: object
            status:
              description: Status reflects the observed state of a Codey.
              properties:
                instanceNamespace:
                  description: InstanceNamespace contains the name of the namespace where the instance resides
                  type: string
                schedules:
                  description: |-
                    Schedules keeps track of random generated schedules, is overwriten by
                    schedules set in the service's spec.
                  properties:
                    backup:
                      description: Backup keeps track of the backup schedule.
                      type: string
                    maintenance:
                      description: Maintenance keeps track of the maintenance schedule.
                      properties:
                        dayOfWeek:
                          description: |-
                            DayOfWeek specifies at which weekday the maintenance is held place.
                            Allowed values are [monday, tuesday, wednesday, thursday, friday, saturday, sunday]
                          enum:
                            - monday
                            - tuesday
                            - wednesday
                            - thursday
                            - friday
                            - saturday
                            - sunday
                          type: string
                        timeOfDay:
                          description: |-
                            TimeOfDay for installing updates in UTC.
                            Format: "hh:mm:ss".
                          pattern: ^([0-1]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$
                          type: string
                      type: object
                  type: object
              type: object
          required:
            - spec
          type: object
      served: true
      storage: true
