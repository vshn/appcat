desired:
  composite:
    resource:
      apiVersion: vshn.appcat.vshn.io/v1
      kind: XVSHNPostgreSQL
      metadata:
        creationTimestamp: "2023-03-21T16:52:31Z"
        finalizers:
        - composite.apiextensions.crossplane.io
        generateName: pgsql-
        generation: 13
        labels:
          appuio.io/organization: vshn
          crossplane.io/claim-name: pgsql
          crossplane.io/claim-namespace: unit-test
          crossplane.io/composite: psql
        name: psql
      spec:
        parameters: null
        writeConnectionSecretToRef: {}
      status: {}
observed:
  composite:
    resource:
      apiVersion: vshn.appcat.vshn.io/v1
      kind: XVSHNPostgreSQL
      metadata:
        annotations: null
        creationTimestamp: "2023-03-21T16:52:31Z"
        finalizers:
        - composite.apiextensions.crossplane.io
        generateName: pgsql-
        generation: 13
        labels:
          appuio.io/organization: vshn
          crossplane.io/claim-name: pgsql
          crossplane.io/claim-namespace: unit-test
          crossplane.io/composite: psql
        name: psql
      spec:
        claimRef:
          apiVersion: vshn.appcat.vshn.io/v1
          kind: VSHNPostgreSQL
          name: pgsql
          namespace: unit-test
        compositionRef:
          name: vshnpostgres.vshn.appcat.vshn.io
        compositionRevisionRef:
          name: vshnpostgres.vshn.appcat.vshn.io-ce52f13
        compositionUpdatePolicy: Automatic
        parameters:
          instances: 3
          encryption:
            enabled: true
      status:
        instanceNamespace: my-psql
  resources:
    psql-cluster-1-luks-key:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsql-gc9x4-cluster-1-luks-key
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-1-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
          providerConfigRef:
            name: kubernetes
        status:
          atProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-1-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
            providerConfigRef:
              name: kubernetes
    psql-cluster-1-wal-luks-key:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsql-gc9x4-cluster-1-wal-luks-key
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-1-wal-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
          providerConfigRef:
            name: kubernetes
        status:
          atProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-1-wal-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
            providerConfigRef:
              name: kubernetes
    psql-cluster-2-luks-key:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsql-gc9x4-cluster-2-luks-key
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-2-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
          providerConfigRef:
            name: kubernetes
        status:
          atProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-2-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
            providerConfigRef:
              name: kubernetes
    psql-cluster-2-wal-luks-key:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsql-gc9x4-cluster-2-wal-luks-key
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-2-wal-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
          providerConfigRef:
            name: kubernetes
        status:
          atProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-2-wal-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
            providerConfigRef:
              name: kubernetes
    psql-cluster-3-luks-key:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsql-gc9x4-cluster-3-luks-key
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-3-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
          providerConfigRef:
            name: kubernetes
        status:
          atProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-3-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
            providerConfigRef:
              name: kubernetes
    psql-cluster-3-wal-luks-key:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsql-gc9x4-cluster-3-wal-luks-key
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-3-wal-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
          providerConfigRef:
            name: kubernetes
        status:
          atProvider:
            manifest:
              apiVersion: v1
              data:
                luksKey: Rm9vMTIzNDU2Nzg5MEJhcjA5ODc2NTQzMjE=
              kind: Secret
              metadata:
                name: psql-cluster-3-wal-luks-key
                namespace: vshn-postgresql-pgsql-gc9x4
            providerConfigRef:
              name: kubernetes
    psql:
      resource:
        apiVersion: kubernetes.crossplane.io/v1alpha1
        kind: Object
        metadata:
          name: pgsq
          namespace: test
        spec:
          forProvider:
            manifest:
              apiVersion: v1
              data:
                clusterInstances: W3BzcWwtY2x1c3Rlci0xIHBzcWwtY2x1c3Rlci0yXQo= # [psql-cluster-1 psql-cluster-2]
              kind: Secret
              metadata:
                name: pgsql-gc9x4-connection
                namespace: pgsql-gc9x4
          connectionDetails:
            - apiVersion: postgresql.cnpg.io/v1
              fieldPath: status.instanceNames
              kind: Cluster
              name: psql-gc9x4-cluster
              namespace: psql-gc9x4
              skipPartOfReleaseCheck: false
              toConnectionSecretKey: clusterInstances
          providerConfigRef:
            name: kubernetes
          status:
            atProvider:
              manifest:
                apiVersion: v1
                data:
                  clusterInstances: W3BzcWwtY2x1c3Rlci0xIHBzcWwtY2x1c3Rlci0yXQo= # [psql-cluster-1 psql-cluster-2]
      connection_details:
        clusterInstances: W3BzcWwtY2x1c3Rlci0xIHBzcWwtY2x1c3Rlci0yXQo= # [psql-cluster-1 psql-cluster-2]
input:
  apiVersion: v1
  data:
    additionalMaintenanceClusterRole: role
    defaultPlan: standard-1
    controlNamespace: appcat-control
    plans:
      '{"standard-1": {"size": {"cpu": "250m", "disk": "16Gi", "enabled": true,
      "memory": "1Gi"}}}'

